<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="http://libs.baidu.com/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://jq22.qiniudn.com/masonry-docs.min.js"></script>
	<style>
		* { 
			box-sizing: border-box;
		}
		.grid {
		  max-width: 1200px;
		  margin: 0 auto;
		}

		.grid::after {
		  	content: '';
		  	display: block;
		  	clear: both;
		}

		.grid-item {
		  	width: 160px;
		  	height: auto;
		  	float: left;
		  	border-radius: 15px;
		 	margin-bottom: 5px;
		 	overflow: hidden;
		}
		.grid-item img{
			width:100%;
			outline-width:0;
  			vertical-align:top;
		}
		.grid-item:hover {
		  cursor: url("http://ued.taobao.com/blog/wp-content/themes/taobaoued/images/cursor.ico"),auto;
		}
		.grid-item.fangda {
		  	width:200px;
		}
	
	</style>
</head>
<body>
	<h1 style="text-align: center;">点击图片切换大小,下拉可以无限加载</h1>
	<div class="grid">
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/3.png" alt=""></div>
  		<div class="grid-item"><img src="img/5.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/7.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/5.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/3.png" alt=""></div>
  		<div class="grid-item"><img src="img/5.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/5.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/2.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/1.png" alt=""></div>
  		<div class="grid-item"><img src="img/5.png" alt=""></div>
  		<div class="grid-item"><img src="img/6.png" alt=""></div>
	</div>
	<script>
		$(function(){
			var $grid=$('.grid');
			$grid.masonry({
				itemSelector: '.grid-item',
				columnWidth: 82.5, //100===200px
				singleMode:true,
				animate:true
			})

			$(window).on('scroll',function(){
				if ($(document).height() - $(this).scrollTop() - $(this).height()<50){  
	                var $boxes = $(getList());  
	                $grid.append($boxes).masonry('appended',$boxes);
            	}
        	});
        	//测试获取列表
    		function getList() {   
        		var boxes = [];
        		var random=Math.ceil(Math.random()*7);
       			for (var i=0; i < 1; i++ ) {
            		boxes.push('<div class="grid-item"><img src="img/'+random+'.png" alt=""></div>');
        		}
        		//把数组转成字符串
        		return boxes.join("");
    		};

			$grid.on( 'click', '.grid-item', function() {
				$( this ).toggleClass('fangda');
				$grid.masonry();
			});
		})
	</script>
</body>
</html>